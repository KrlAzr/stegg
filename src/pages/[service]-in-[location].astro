---
import Layout from '../layouts/Layout.astro';
import { SERVICES } from '../data/services';
import { LOCATIONS } from '../data/locations';

// 1. GENERATE ALL PATHS
export async function getStaticPaths() {
  const paths = [];
  
  SERVICES.forEach((service) => {
    LOCATIONS.forEach((location) => {
      paths.push({
        params: { 
            service: service.slug, 
            location: location.slug 
        },
        props: { service, location },
      });
    });
  });

  return paths;
}

// 2. GET DATA
const { service, location } = Astro.props;

// 3. PAGE METADATA
const pageTitle = `${service.name} in ${location.name} | Stegg Digital`;
const pageDescription = `Looking for ${service.name} in ${location.name}? We build high-performance digital assets that help businesses in ${location.name} dominate their local market.`;
---

<Layout title={pageTitle} description={pageDescription}>
  
  <section class="relative pt-32 pb-20 bg-slate-50 overflow-hidden">
    <div class="absolute inset-0 opacity-5" style="background-image: radial-gradient(#4b5563 1px, transparent 1px); background-size: 32px 32px;"></div>
    
    <div class="max-w-7xl mx-auto px-4 sm:px-6 relative z-10 text-center">
        
        <div class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-blue-100 text-blue-800 text-sm font-bold mb-6">
             <span class="relative flex h-2 w-2">
                <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-blue-400 opacity-75"></span>
                <span class="relative inline-flex rounded-full h-2 w-2 bg-blue-500"></span>
            </span>
            Serving {location.name} Businesses
        </div>
        
        <h1 class="text-4xl md:text-6xl font-extrabold text-slate-900 mb-6 tracking-tight leading-tight">
            The Best <span class="text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-cyan-500">{service.name}</span> <br />
            in {location.name}.
        </h1>
        
        <p class="text-xl text-slate-600 max-w-2xl mx-auto mb-10 leading-relaxed">
            Stop losing customers to competitors in <strong>{location.name}</strong>. 
            {service.description}
        </p>

        <a href="/" class="inline-flex items-center gap-2 px-8 py-4 bg-slate-900 text-white font-bold rounded-xl hover:bg-slate-800 transition-all shadow-lg hover:-translate-y-1 group">
            Get More Customers in {location.name}
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="group-hover:translate-x-1 transition-transform">
                <path d="M5 12h14"/><path d="m12 5 7 7-7 7"/>
            </svg>
        </a>

    </div>
  </section>

  <section class="py-20 bg-white">
    <div class="max-w-4xl mx-auto px-4 sm:px-6">
        <h2 class="text-3xl font-bold text-slate-900 mb-8 text-center">Why businesses in {location.name} choose Stegg</h2>
        <div class="prose prose-lg mx-auto text-slate-600">
            <p>
                Running a business in <strong>{location.name}</strong> is competitive. Whether you are targeting customers near the city center or the surrounding neighborhoods, you need a digital presence that stands out.
            </p>
            <ul class="list-disc pl-6 space-y-2 mt-6">
                <li><strong>Local Speed:</strong> Your site loads instantly for users in {location.name}.</li>
                <li><strong>Local SEO:</strong> We optimize for keywords like "{service.name} near {location.name}".</li>
            </ul>
        </div>
    </div>
  </section>

</Layout>