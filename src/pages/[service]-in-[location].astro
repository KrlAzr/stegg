---
import Layout from '../layouts/Layout.astro';
import Contact from '../components/Contact.astro';
import { SERVICES } from '../data/services';   // <--- THIS WAS MISSING
import { LOCATIONS } from '../data/locations'; // <--- THIS WAS MISSING

export async function getStaticPaths() {
  // Generate a path for every combination of Service + Location
  // e.g. /web-design-in-subang-jaya, /seo-in-klang
  return SERVICES.flatMap(service =>
    LOCATIONS.map(location => ({
      params: { 
        service: service.slug, 
        location: location.slug 
      },
      props: { service, location },
    }))
  );
}

const { service, location } = Astro.props;

// Create dynamic title and description
const pageTitle = `${service.name} in ${location.name} | Stegg Digital`;
const pageDescription = `Top-rated ${service.name} services in ${location.name}. We help businesses in ${location.name} grow with high-performance digital solutions.`;
---

<Layout title={pageTitle} description={pageDescription}>
  <main class="pt-20">
    <section class="bg-slate-900 text-white py-20 px-4">
      <div class="max-w-4xl mx-auto text-center">
        <h1 class="text-4xl md:text-6xl font-bold mb-6">
          {service.name} in <span class="text-blue-400">{location.name}</span>
        </h1>
        <p class="text-xl text-slate-300 mb-8 max-w-2xl mx-auto">
          {service.description} specifically tailored for businesses in {location.name}.
        </p>
        <a href="#contact" class="inline-block bg-blue-600 hover:bg-blue-500 text-white font-bold py-4 px-8 rounded-full transition-all">
          Get a Quote for {location.name}
        </a>
      </div>
    </section>

    <section class="py-16 px-4">
      <div class="max-w-3xl mx-auto prose prose-lg prose-slate">
        <h2>Why Choose Stegg for {service.name} in {location.name}?</h2>
        <p>
          Running a business in <strong>{location.name}</strong> comes with unique challenges. 
          You need a partner who understands the local market. Whether you are targeting customers 
          nearby or expanding across the region, our <strong>{service.name}</strong> strategies are designed to deliver ROI.
        </p>
        
        <ul>
            <li><strong>Local Focus:</strong> Optimized for the {location.name} market.</li>
            <li><strong>Speed:</strong> Our solutions are built for high performance.</li>
            <li><strong>Results:</strong> We focus on leads and sales, not just vanity metrics.</li>
        </ul>

        <h3>Ready to dominate the market in {location.name}?</h3>
        <p>
          Don't let your competitors take your customers. Let's build a {service.name} strategy that wins.
        </p>
      </div>
    </section>

    <div id="contact">
      <Contact />
    </div>
  </main>
</Layout>