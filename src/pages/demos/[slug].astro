---
// src/pages/demos/[slug].astro
import Layout from '../../layouts/Layout.astro';
import Footer from '../../components/Footer.astro';
import { DEMOS } from '../../data/demos';

export function getStaticPaths() {
  return DEMOS.map(demo => ({
    params: { slug: demo.slug },
    props: { demo },
  }));
}

const { demo } = Astro.props;

// Safety Check: Does this demo have reviews?
const hasReviews = demo.reviews && demo.reviews.length > 0;
const firstReview = hasReviews ? demo.reviews[0] : null;

// Dynamic Color Mapper
const accentSolid = {
    rose: 'bg-rose-600 text-white shadow-xl shadow-rose-600/20 hover:shadow-rose-600/30',
    sky: 'bg-sky-600 text-white shadow-xl shadow-sky-600/20 hover:shadow-sky-600/30',
    teal: 'bg-teal-600 text-white shadow-xl shadow-teal-600/20 hover:shadow-teal-600/30',
    indigo: 'bg-indigo-600 text-white shadow-xl shadow-indigo-600/20 hover:shadow-indigo-600/30',
    orange: 'bg-orange-600 text-white shadow-xl shadow-orange-600/20 hover:shadow-orange-600/30',
    slate: 'bg-slate-900 text-white shadow-xl shadow-slate-900/20 hover:shadow-slate-900/30',
    amber: 'bg-amber-600 text-white shadow-xl shadow-amber-600/20 hover:shadow-amber-600/30',
    stone: 'bg-stone-600 text-white shadow-xl shadow-stone-600/20 hover:shadow-stone-600/30',
    zinc: 'bg-zinc-900 text-white shadow-xl shadow-zinc-900/20 hover:shadow-zinc-900/30',
    red: 'bg-red-700 text-white shadow-xl shadow-red-700/20 hover:shadow-red-700/30',
}[demo.color] || 'bg-black text-white shadow-xl shadow-black/20';

const accentText = {
    rose: 'text-rose-600',
    sky: 'text-sky-600',
    teal: 'text-teal-600',
    indigo: 'text-indigo-600',
    orange: 'text-orange-600',
    slate: 'text-slate-800',
    amber: 'text-amber-600',
    stone: 'text-stone-600',
    zinc: 'text-zinc-900',
    red: 'text-red-700',
}[demo.color] || 'text-black';

const accentBorder = {
    rose: 'border-rose-200',
    sky: 'border-sky-200',
    teal: 'border-teal-200',
    indigo: 'border-indigo-200',
    orange: 'border-orange-200',
    slate: 'border-slate-200',
    amber: 'border-amber-200',
    stone: 'border-stone-200',
    zinc: 'border-zinc-200',
    red: 'border-red-200',
}[demo.color] || 'border-gray-200';

---

<Layout title={`${demo.title} | Stegg Demo`} description={demo.headline}>
    
    <nav class="fixed top-0 w-full z-50 bg-white/90 backdrop-blur-xl border-b border-gray-100 transition-all duration-300">
        <div class="max-w-7xl mx-auto px-6 lg:px-8 h-24 flex justify-between items-center">
            <a href="#" class="font-serif text-2xl font-bold text-gray-900 tracking-tight">
                {demo.title}
            </a>
            
            <div class="hidden md:flex gap-12 text-sm font-medium text-gray-500">
                <a href="#process" class="hover:text-black transition duration-300">Process</a>
                {hasReviews && <a href="#reviews" class="hover:text-black transition duration-300">Stories</a>}
                <a href="#faq" class="hover:text-black transition duration-300">FAQ</a>
            </div>

            <div class="flex items-center gap-8">
                <a href="/projects" class="hidden lg:block text-[11px] font-bold text-gray-400 hover:text-gray-900 uppercase tracking-widest transition duration-300">
                    Exit Demo
                </a>
                <a href="#book" class={`px-8 py-3.5 rounded-full text-xs font-bold uppercase tracking-widest hover:opacity-90 hover:-translate-y-0.5 transition-all duration-300 ${accentSolid}`}>
                    Book Now
                </a>
            </div>
        </div>
    </nav>

    <header class="relative min-h-screen flex items-center pt-24 overflow-hidden bg-white">
        <div class="absolute top-0 right-0 w-3/5 h-full bg-gray-50/50 -skew-x-12 translate-x-1/4 z-0 hidden lg:block"></div>

        <div class="relative z-10 max-w-7xl mx-auto px-6 lg:px-8 grid lg:grid-cols-2 gap-16 xl:gap-24 items-center">
            
            <div class="space-y-10 reveal max-w-2xl">
                <div class={`inline-flex items-center gap-2 px-4 py-2 rounded-full border ${accentBorder} bg-white shadow-sm`}>
                    <span class={`w-2 h-2 rounded-full ${accentSolid.split(' ')[0]}`}></span>
                    <span class={`text-[11px] font-bold uppercase tracking-widest ${accentText}`}>
                        {demo.niche} Specialized
                    </span>
                </div>
                
                <h1 class="text-5xl lg:text-7xl xl:text-[5rem] font-serif font-bold text-gray-900 leading-[1.1] tracking-tight">
                    {demo.headline}
                </h1>
                
                <p class="text-lg lg:text-xl text-gray-500 leading-relaxed font-light max-w-lg">
                    {demo.subheadline}
                </p>
                
                <div class="flex flex-col sm:flex-row gap-4 pt-4">
                    <a href="#book" class={`px-10 py-5 rounded-full text-sm font-bold uppercase tracking-widest text-center transition-all duration-300 transform hover:-translate-y-1 ${accentSolid}`}>
                        Book Appointment
                    </a>
                    <a href="#process" class="px-10 py-5 rounded-full bg-white text-gray-900 border border-gray-200 text-sm font-bold uppercase tracking-widest text-center hover:bg-gray-50 hover:border-gray-300 transition-all duration-300">
                        Learn More
                    </a>
                </div>
                
                <div class="pt-8 border-t border-gray-100 flex items-center gap-8 text-xs font-bold text-gray-400 uppercase tracking-widest">
                    <div class="flex items-center gap-2">
                        <span class="w-1.5 h-1.5 rounded-full bg-emerald-500 animate-pulse"></span>
                        Taking New Patients
                    </div>
                    {hasReviews && (
                        <div class="flex items-center gap-2">
                            <span class="text-yellow-400 text-base">★★★★★</span>
                            4.9 Verified Rating
                        </div>
                    )}
                </div>
            </div>

            <div class="relative h-[600px] lg:h-[700px] w-full hidden lg:block rounded-[2rem] overflow-hidden shadow-2xl group reveal delay-200">
                <img src={demo.image} alt={demo.title} class="w-full h-full object-cover transition-transform duration-[1.5s] ease-in-out group-hover:scale-105" />
                
                {hasReviews && firstReview && (
                    <div class="absolute bottom-12 left-8 right-8 bg-white/90 backdrop-blur-md p-8 rounded-2xl shadow-lg border border-white/50 transform translate-y-4 opacity-0 group-hover:translate-y-0 group-hover:opacity-100 transition-all duration-500 delay-100">
                        <p class="font-serif text-lg italic text-gray-800 mb-4 leading-relaxed">"{firstReview.text}"</p>
                        <div class="flex items-center gap-3">
                             <div class={`w-10 h-10 rounded-full flex items-center justify-center font-bold text-sm ${accentSolid}`}>
                                {firstReview.name.charAt(0)}
                            </div>
                            <div class="text-xs font-bold uppercase tracking-widest text-gray-900">{firstReview.name}</div>
                        </div>
                    </div>
                )}
            </div>
        </div>
    </header>

    {demo.stats && (
        <section class="bg-slate-950 text-white py-24 reveal">
            <div class="max-w-7xl mx-auto px-6 lg:px-8 grid grid-cols-1 md:grid-cols-3 gap-12 text-center divide-y md:divide-y-0 md:divide-x divide-slate-800/50">
                {demo.stats.map(stat => (
                    <div class="pt-12 md:pt-0 px-6 group cursor-default">
                        <div class={`text-5xl lg:text-6xl font-serif font-bold mb-4 transition-colors duration-300 ${accentText.replace('text-', 'text-opacity-90 group-hover:text-opacity-100 text-')}`}>
                            {stat.value}
                        </div>
                        <div class="text-[11px] font-bold uppercase tracking-[0.2em] text-slate-500 group-hover:text-slate-300 transition-colors duration-300">
                            {stat.label}
                        </div>
                    </div>
                ))}
            </div>
        </section>
    )}

    {demo.problem && (
        <section class="py-32 lg:py-40 bg-stone-50/50">
            <div class="max-w-3xl mx-auto px-6 text-center reveal">
                <span class={`text-xs font-bold uppercase tracking-widest mb-8 block ${accentText}`}>The Reality</span>
                
                <h2 class="text-4xl md:text-5xl lg:text-6xl font-serif font-bold text-gray-900 mb-12 leading-tight">
                    {demo.problem.title}
                </h2>
                
                <div class="w-px h-16 bg-gray-300 mx-auto mb-12"></div>
                
                <p class="text-xl md:text-2xl text-gray-600 leading-relaxed font-light">
                    "{demo.problem.text}"
                </p>
            </div>
        </section>
    )}

    <section class="relative h-[60vh] lg:h-[80vh] overflow-hidden flex items-center justify-center reveal">
        <div class="absolute inset-0 z-0">
             <img src={`https://images.unsplash.com/photo-1497366216548-37526070297c?auto=format&fit=crop&q=80&w=2400`} alt="Atmosphere" class="w-full h-full object-cover" />
             <div class="absolute inset-0 bg-black/40"></div>
        </div>
        <div class="relative z-10 text-center text-white px-6 max-w-4xl">
            <h2 class="text-4xl lg:text-6xl font-serif font-bold mb-6">Experience the Difference</h2>
            <p class="text-lg lg:text-xl text-white/90 font-light max-w-2xl mx-auto">
                We believe environment plays a crucial role in your journey. Our space is designed for comfort, privacy, and peace of mind.
            </p>
        </div>
    </section>

    {demo.process && (
        <section id="process" class="py-32 bg-white relative overflow-hidden">
            <div class="max-w-7xl mx-auto px-6 lg:px-8 relative z-10">
                <div class="text-center mb-24 reveal">
                    <span class="text-gray-400 font-bold uppercase tracking-widest text-xs">Our Methodology</span>
                    <h2 class="text-3xl md:text-5xl font-serif font-bold mt-4 text-gray-900">The Path to Results</h2>
                </div>
                
                <div class="grid md:grid-cols-3 gap-12 lg:gap-24 relative">
                    <div class="hidden md:block absolute top-16 left-12 right-12 h-px bg-gray-100 -z-10"></div>

                    {demo.process.map((step, index) => (
                        <div class="relative group bg-white pt-4 text-center reveal delay-100">
                            <div class={`w-24 h-24 bg-white border-[6px] border-gray-50 rounded-full flex items-center justify-center text-3xl font-serif font-bold mb-10 mx-auto transition-all duration-500 group-hover:scale-110 group-hover:border-transparent group-hover:shadow-2xl ${accentText} group-hover:bg-gray-50`}>
                                {step.step}
                            </div>
                            <h3 class="text-xl font-bold text-gray-900 mb-4">{step.title}</h3>
                            <p class="text-gray-500 leading-relaxed text-base px-4">{step.text}</p>
                        </div>
                    ))}
                </div>
            </div>
        </section>
    )}

    <section class="py-32 bg-stone-50">
        <div class="max-w-7xl mx-auto px-6 lg:px-8">
            <div class="grid lg:grid-cols-2 gap-20 items-center">
                <div class="order-2 lg:order-1 reveal">
                    <img src={demo.image} alt="Detail" class="rounded-[2rem] shadow-2xl w-full h-[600px] object-cover grayscale hover:grayscale-0 transition-all duration-700" />
                </div>
                <div class="order-1 lg:order-2 space-y-12 reveal delay-200">
                    <div>
                        <span class={`text-xs font-bold uppercase tracking-widest mb-4 block ${accentText}`}>Why Choose Us</span>
                        <h2 class="text-4xl md:text-5xl font-serif font-bold text-gray-900">Precision in Every Detail.</h2>
                    </div>
                    
                    <div class="space-y-8">
                        <div class="flex gap-6">
                            <div class={`w-12 h-12 rounded-xl flex items-center justify-center shrink-0 ${accentSolid.replace('shadow-xl', 'shadow-md')}`}>
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75 11.25 15 15 9.75M21 12c0 5.523-4.477 10-10 10S1 17.523 1 12 5.477 2 12 2s10 4.477 10 10Z" /></svg>
                            </div>
                            <div>
                                <h4 class="text-xl font-bold text-gray-900 mb-2">Certified Expertise</h4>
                                <p class="text-gray-500 leading-relaxed">Our team undergoes rigorous annual training to stay ahead of industry standards.</p>
                            </div>
                        </div>
                        <div class="flex gap-6">
                            <div class={`w-12 h-12 rounded-xl flex items-center justify-center shrink-0 ${accentSolid.replace('shadow-xl', 'shadow-md')}`}>
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" /></svg>
                            </div>
                            <div>
                                <h4 class="text-xl font-bold text-gray-900 mb-2">Zero Wait Policy</h4>
                                <p class="text-gray-500 leading-relaxed">Your time is valuable. We respect your appointment slot with strict punctuality.</p>
                            </div>
                        </div>
                        <div class="flex gap-6">
                            <div class={`w-12 h-12 rounded-xl flex items-center justify-center shrink-0 ${accentSolid.replace('shadow-xl', 'shadow-md')}`}>
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75 11.25 15 15 9.75m-3-13.5a2.25 2.25 0 0 1 2.25 2.25h-5.5a2.25 2.25 0 0 1 2.25-2.25ZM12 12a2.25 2.25 0 0 1-2.25 2.25H4.5a2.25 2.25 0 0 1-2.25-2.25v-2.25c0-.828.672-1.5 1.5-1.5h10.5a1.5 1.5 0 0 1 1.5 1.5V12a2.25 2.25 0 0 1-2.25 2.25Zm0 0h3m-3 0a2.25 2.25 0 0 1 2.25 2.25H15a2.25 2.25 0 0 1 2.25-2.25M6 20.25h12a2.25 2.25 0 0 0 2.25-2.25V15a2.25 2.25 0 0 0-2.25-2.25H6A2.25 2.25 0 0 0 3.75 15v3a2.25 2.25 0 0 0 2.25 2.25Z" /></svg>
                            </div>
                            <div>
                                <h4 class="text-xl font-bold text-gray-900 mb-2">Transparent Pricing</h4>
                                <p class="text-gray-500 leading-relaxed">No hidden fees. You get a full itemized quotation before we begin any work.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    {hasReviews && (
        <section id="reviews" class="py-32 bg-slate-900 text-white overflow-hidden relative">
            <div class="absolute inset-0 opacity-[0.03] bg-[url('https://www.transparenttextures.com/patterns/stardust.png')]"></div>

            <div class="max-w-7xl mx-auto px-6 lg:px-8 mb-20 flex flex-col md:flex-row justify-between items-start md:items-end gap-10 relative z-10 reveal">
                <div>
                    <span class={`text-xs font-bold uppercase tracking-widest mb-6 block ${accentText}`}>Success Stories</span>
                    <h2 class="text-4xl md:text-5xl font-serif font-bold">Client Experiences</h2>
                </div>
                <div class="hidden md:flex items-center gap-3 text-sm font-medium text-slate-400">
                    <span>Swipe for more</span>
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-4 h-4"><path stroke-linecap="round" stroke-linejoin="round" d="M13.5 4.5 21 12m0 0-7.5 7.5M21 12H3" /></svg>
                </div>
            </div>
            
            <div class="flex gap-6 px-6 lg:px-8 overflow-x-auto pb-12 snap-x snap-mandatory scroll-pl-6 relative z-10 hide-scrollbar reveal delay-200">
                {demo.reviews.map(review => (
                    <div class="min-w-[320px] md:min-w-[500px] snap-start bg-white/5 backdrop-blur-sm border border-white/10 p-8 md:p-10 rounded-3xl transition-all duration-300 hover:bg-white/10 hover:border-white/20 flex flex-col justify-between h-auto">
                        <div>
                             <div class="flex text-yellow-500 text-sm mb-8 gap-1">{'★'.repeat(review.stars)}</div>
                             <p class="text-lg md:text-xl text-slate-200 italic mb-10 leading-relaxed font-light">"{review.text}"</p>
                        </div>
                        <div class="flex items-center gap-5 mt-auto">
                            <div class={`w-12 h-12 rounded-full flex items-center justify-center font-bold text-lg text-white ${accentSolid}`}>
                                {review.name.charAt(0)}
                            </div>
                            <div>
                                <div class="font-bold text-white text-base">{review.name}</div>
                                <div class="text-[10px] text-slate-400 uppercase tracking-widest font-bold mt-1">Verified Client</div>
                            </div>
                        </div>
                    </div>
                ))}
                 <div class="min-w-[20px] snap-start"></div> 
            </div>
        </section>
    )}

    {demo.faq && (
        <section id="faq" class="py-32 bg-white">
            <div class="max-w-3xl mx-auto px-6">
                <div class="text-center mb-20 reveal">
                    <h2 class="text-4xl font-serif font-bold text-gray-900">Common Questions</h2>
                </div>
                
                <div class="space-y-6 reveal delay-100">
                    {demo.faq.map(item => (
                        <details class="group bg-white border border-gray-100 rounded-2xl overflow-hidden transition-all duration-300 hover:shadow-lg open:shadow-lg open:border-gray-200">
                            <summary class="flex justify-between items-center font-bold text-lg cursor-pointer list-none p-8 text-gray-900 hover:bg-gray-50/50 transition">
                                <span class="group-hover:translate-x-1 transition-transform duration-300">{item.q}</span>
                                <span class="transition-transform duration-300 group-open:rotate-180 text-gray-300 group-open:text-gray-900">
                                    <svg fill="none" height="24" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" width="24"><path d="M6 9l6 6 6-6"></path></svg>
                                </span>
                            </summary>
                            <div class="text-gray-600 p-8 pt-0 leading-relaxed border-t border-transparent group-open:border-gray-50 text-base">
                                {item.a}
                            </div>
                        </details>
                    ))}
                </div>
            </div>
        </section>
    )}

    <section id="book" class="py-40 bg-stone-50 text-center relative overflow-hidden">
        <div class="absolute inset-0 opacity-[0.03] bg-[url('https://www.transparenttextures.com/patterns/cubes.png')]"></div>
        <div class="relative z-10 max-w-4xl mx-auto px-6 reveal">
            <h2 class="text-5xl md:text-7xl font-serif font-bold text-gray-900 mb-10 tracking-tight">Ready to transform?</h2>
            <p class="text-xl md:text-2xl text-gray-500 mb-16 max-w-2xl mx-auto font-light leading-relaxed">
                Secure your consultation today. <br class="hidden md:block" />Our schedule fills up weeks in advance.
            </p>
            
            <form class="max-w-lg mx-auto bg-white p-3 rounded-full shadow-2xl flex transform transition-transform duration-300 hover:scale-[1.02] focus-within:scale-[1.02]">
                <input type="email" placeholder="Enter your email address" class="flex-1 bg-transparent border-none px-8 focus:ring-0 outline-none text-gray-900 placeholder-gray-400 text-lg" required />
                <button class={`px-10 py-5 rounded-full font-bold uppercase tracking-widest text-xs whitespace-nowrap transition-all duration-300 ${accentSolid} hover:shadow-lg`}>
                    Get Started
                </button>
            </form>
            
            <p class="mt-12 text-[10px] text-gray-400 font-bold uppercase tracking-[0.2em]">
                No spam. 100% Confidential.
            </p>
        </div>
    </section>

    <Footer />
</Layout>

<script>
    // SCROLL ANIMATION OBSERVER
    const observerOptions = {
        root: null,
        rootMargin: '0px',
        threshold: 0.1
    };

    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.classList.add('active');
            }
        });
    }, observerOptions);

    document.querySelectorAll('.reveal').forEach((el) => {
        observer.observe(el);
    });
</script>

<style>
    .hide-scrollbar::-webkit-scrollbar {
        display: none;
    }
    .hide-scrollbar {
        -ms-overflow-style: none;
        scrollbar-width: none;
    }
    
    /* Animation Classes */
    .reveal {
        opacity: 0;
        transform: translateY(30px);
        transition: all 0.8s cubic-bezier(0.5, 0, 0, 1);
    }
    
    .reveal.active {
        opacity: 1;
        transform: translateY(0);
    }
    
    .delay-100 { transition-delay: 0.1s; }
    .delay-200 { transition-delay: 0.2s; }
    .delay-300 { transition-delay: 0.3s; }
</style>