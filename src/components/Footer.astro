---
// src/components/Footer.astro
const year = new Date().getFullYear();
---
<footer class="bg-slate-950 py-12 border-t border-slate-900 text-slate-400 text-sm">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        
        <div class="flex flex-col md:flex-row justify-between items-center gap-8 mb-8">
            
            <div class="text-center md:text-left">
                <span class="text-white font-bold text-xl tracking-tight">Stegg.</span>
                <p class="mt-2 text-slate-500">The Asset-First Digital Agency.</p>
            </div>

            <div class="flex flex-col md:flex-row items-center gap-6">
                
                <button 
                    id="copy-email-btn"
                    class="group flex items-center gap-3 px-4 py-2 bg-slate-900 border border-slate-800 rounded-lg hover:border-blue-600/50 hover:bg-slate-800 transition-all duration-300 cursor-pointer active:scale-95"
                    aria-label="Copy Email Address"
                >
                    <div class="relative w-4 h-4 text-slate-400 group-hover:text-blue-400">
                        <i data-lucide="copy" id="icon-copy" class="absolute inset-0 w-full h-full transition-all duration-300 scale-100 opacity-100"></i>
                        <i data-lucide="check" id="icon-check" class="absolute inset-0 w-full h-full text-green-400 transition-all duration-300 scale-0 opacity-0"></i>
                    </div>

                    <span id="email-text" class="font-mono font-medium text-slate-300 group-hover:text-white transition-colors">
                        khairulazri@stegg.dev
                    </span>
                    
                    <span id="copy-feedback" class="text-xs font-bold text-green-400 opacity-0 transition-opacity duration-300 -ml-2">
                        Copied!
                    </span>
                </button>

                <div class="hidden md:block w-px h-6 bg-slate-900"></div>

                <a href="https://www.linkedin.com/in/khairulazri/" target="_blank" aria-label="LinkedIn" class="w-10 h-10 bg-slate-900 rounded-xl flex items-center justify-center border border-slate-800 hover:bg-[#0077b5] hover:border-[#0077b5] hover:text-white transition-all duration-300 shadow-lg shadow-black/20 group">
                    <i data-lucide="linkedin" class="w-5 h-5 group-hover:scale-110 transition-transform"></i>
                </a>
            </div>

        </div>

        <div class="flex flex-col md:flex-row justify-between items-center pt-8 border-t border-slate-900 gap-4">
            <div class="flex flex-wrap justify-center gap-6 font-medium text-slate-500">
                <a href="/#how-it-works" class="hover:text-blue-400 transition-colors">How it Works</a>
                <a href="/#pricing" class="hover:text-blue-400 transition-colors">Pricing</a>
                <a href="/#contact" class="hover:text-blue-400 transition-colors">Contact</a>
                
                <a href="/locations/" class="hover:text-blue-400 transition-colors flex items-center gap-2 text-slate-400">
                    <i data-lucide="map" class="w-3 h-3"></i> 
                    Service Locations
                </a>
            </div>

            <div class="text-slate-600 text-xs text-center md:text-right">
                &copy; {year} Stegg Digital. Built for dominance.
            </div>
        </div>

    </div>
</footer>

<script>
    const copyBtn = document.getElementById('copy-email-btn');
    const emailText = document.getElementById('email-text');
    const copyFeedback = document.getElementById('copy-feedback');
    const iconCopy = document.getElementById('icon-copy');
    const iconCheck = document.getElementById('icon-check');

    if (copyBtn) {
        copyBtn.addEventListener('click', async () => {
            try {
                // 1. Copy text to clipboard
                await navigator.clipboard.writeText('khairulazri@stegg.dev');

                // 2. Visual Feedback (Show "Copied!" and Check Icon)
                emailText.classList.add('opacity-50'); // Dim the email slightly
                copyFeedback.classList.remove('opacity-0'); // Show "Copied!"
                
                // Swap Icons
                iconCopy.classList.add('scale-0', 'opacity-0');
                iconCheck.classList.remove('scale-0', 'opacity-0');
                iconCheck.classList.add('scale-100', 'opacity-100');

                // 3. Reset after 2 seconds
                setTimeout(() => {
                    emailText.classList.remove('opacity-50');
                    copyFeedback.classList.add('opacity-0');
                    
                    // Swap Icons Back
                    iconCheck.classList.remove('scale-100', 'opacity-100');
                    iconCheck.classList.add('scale-0', 'opacity-0');
                    iconCopy.classList.remove('scale-0', 'opacity-0');
                    iconCopy.classList.add('scale-100', 'opacity-100');
                }, 2000);

            } catch (err) {
                console.error('Failed to copy text: ', err);
            }
        });
    }
</script>